# Global 설정
global
    log /dev/log    local0
    log /dev/log    local1 notice
    # chroot /var/lib/haproxy
    # stats socket /run/haproxy/admin.sock mode 660 level admin
    stats timeout 30s
    # user haproxy
    # group haproxy
    daemon

defaults
    log     global
    option  redispatch
    option  dontlognull
    timeout connect 5000ms
    timeout client  50000ms
    timeout server  50000ms

# Frontend 설정 (클라이언트 요청 처리)
frontend tcp_front
    bind *:80
    default_backend login_backend

# Backend 설정 (로그인 서비스 로드 밸런싱)
backend login_backend
    mode tcp  # TCP 모드 설정
    balance roundrobin
    server login_service_1 127.0.0.1:3001 check
    server login_service_2 127.0.0.1:3002 check

# Backend 설정 (물고기 밥주기 서비스 로드 밸런싱)
backend feeding_backend
    mode tcp  # TCP 모드 설정
    balance roundrobin
    server feeding_service_1 127.0.0.1:3003 check
    server feeding_service_2 127.0.0.1:3004 check
